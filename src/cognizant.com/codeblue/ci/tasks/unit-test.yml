platform: linux

image_resource:
  type: docker-image
  source:
    repository: golang
    tag: 1.7.1

inputs:
- name: hello-go
outputs:
- name: coverage-results

run:
  path: sh
  args:
  - -exc
  - |
    ls -ltr
    apt-get update
    apt install golang-glide
    ls -ltr
    go env
    pwd
    export GOPATH=$PWD/hello-go
    cd hello-go/src/cognizant.com/codeblue
    glide up
    pwd
    cd ..
    cd ..
    echo "START TESTING"
    go test cognizant.com/codeblue/test/
    echo "TEST DONE"
